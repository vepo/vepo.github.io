---
title: Entendendo as threads
published: true
description: Voc√™ sabe o que √© o m√≠nimo que voc√™ precisa saber pra desenvolver Java? Aqui eu vou mostrar um pouco de como criar um programa "production ready".
tags: [Java]
cover_image: /assets/images/java/duke-cheers.png
series: Java 101
permalink: /posts/java-101
publish_date: 2021-11-23 16:47:00 +0300
---

Nos √∫ltimos meses muitas pessoas vem me perguntando por onde come√ßar a desenvolver Java. Eu sei que existem v√°rios cursos na internet que tem essa resposta e n√£o quero me propor a criar um curso Java. Creio que o conhecimento deve ser livre e sem escasses. Por isso vou te apresentar o b√°sico que voc√™ deve saber sobre Java.

Eu vou tentar seguir a ordem dessa thread que fiz em dezembro.

{% twitter https://twitter.com/vepo/status/1473250093742571521 %}

# Java √© um ecossistema

Muitos tendem a querer comparar Java com outras linguagens. Alguns tem a pretens√£o de comparar Java com linguagens como Javascript ou mesmo Scala. Esse √© um erro crasso! Java n√£o √© apenas uma linguagem, mas um ecossistema.

Primeiro para entender melhor vamos tentar definir o que √© uma linguagem de programa√ß√£o...

Quando a computa√ß√£o eletr√¥nica come√ßou a se popularizar, existiam in√∫meras plataformas e cada uma delas haviam um conjunto de instru√ß√µes. Para desenvolver qualquer software era preciso conhecer o hardware e o conjunto de instru√ß√µes que existem naquele hardware. Quer ver um exemplo? Tenta navegar no [c√≥digo da Apollo 11](https://github.com/chrislgarry/Apollo-11) para tentar entender algo. √â praticamente imposs√≠vel, at√© mesmo para quem j√° desenvolveu em Assembly. Isso acontece porque o cojunto de instru√ß√µes e a arquitetura do hardware s√£o completamente diferentes das m√°quinas que temos hoje.

![Olha o c√≥digo da igni√ß√£o da Apolo 11! üò≤](/assets/images/apollo11.png)

Com o tempo as m√°quinas ganharam um padr√£o, tanto de processadores como de Opcodes. Hoje sabemos que existe um processador, um barramento, mem√≥ria, registradores, etc... Esses componentes variam um pouco de arquitetura pra arquitetura, mas eles continuam seguindo um padr√£o. Abaixo voc√™ pode ver a documenta√ß√£o de um opcode.

![Exemplo de Opcode](/assets/images/opcode.png)

_‚Äî Cara qual a rela√ß√£o disso com Java?_

Bom, vamos l√°! Eu vou chegar l√°! Eu prometo! Tudo que um computador reconhece s√£o opcodes! Nenhum computador entende nenhuma linguagem de programa√ß√£o. Ah, mas voc√™ vai me dizer que algumas pessoas desenvolvem assembly... Sim! Mas mesmo para quem faz esses progamas √© preciso transcrever o programa em linguagem de m√°quina. Por exemplo, no opcode acima, o computador n√£o sabe o que √© `NOP`, ele s√≥ sabe que a opera√ß√£o `01` n√£o deve produzir nenhum efeito. Ent√£o todo programa precisa ser compilado para uma s√©rie de instru√ß√µes que chegam a praticamente o formato de m√°quina. Estou falando do famoso `EXE` do Windows. Mas esses programas tamb√©m dependem de uma s√©rie de bibliotecas do sistema operacional para o qual foram compilados.

At√© 1990 era comum um programa ser compilado para uma m√°quina especifica. Quem j√° trabalhou com Linux nos anos 2000 sabe o que √© isso. MAS uma grande empresa do Vale do Sil√≠cio teve uma grande ideia! E se escrev√™ssemos uma linguagem em que ao se escrever um c√≥digo ele poder√° ser executado em qualquer lugar? 

Essa ideia era pensada porque come√ßavam a existir dispositivos que no futuro poderiam ter um processador de uso gen√©rico. Mas como fazer para encapsular toda a l√≥gica do hardware e do sistema operacional? Por isso surgiu algo que √© t√£o importante quanto a linguagem Java: a **Java Virtual Machine**! Ou JVM para os mais intimos...

A JVM √© um programa que l√™ um conjunto de classes e executa como se fosse um processador em alto n√≠vel. Ela tem uma arquitetura como se fosse uma m√°quina e tem instru√ß√µes como se fosse um processador. A [especifica√ß√£o](https://docs.oracle.com/javase/specs/jvms/se18/html/index.html) dela √© aberta e pode ser acessada por qualquer fornecedor que queira porta ela em seu sistema operacional. 

Ent√£o agora para e olha para o transformador que existe na sua rua... E se eu te dissesse que √© provavel que existe uma JVM rodando perto dele para monitora ele? Voc√™ acreditaria? Em algumas cidades existe. Isso s√≥ √© poss√≠vel porque ela √© port√°til em qualquer sistema operacional. 

Para criar o Java, foi preciso criar uma m√°quina virtual poderosa e √© ela quem tem grande parte do cr√©dito porque ao abstrair as particularidades de v√°rios sistemas operacionais e hardwares, foi poss√≠vel se econimizar tempo escrevendo c√≥digo.

_‚Äî Ent√£o voc√™ t√° falando que o Java √© famoso s√≥ por causa da JVM?_

√ìbvio que n√£o! A JVM j√° vem com uma biblioteca padr√£o que √© muito poderosa. Podemos ter acesso a biblioteca de cole√ß√µes que √© poderosa, a biblioteca de Reflections foi a base da grande maioria dos frameworks dos anos 2000, etc... A JVM era poderosa e ela era umbilicalmente ligada ao Java. Ela era t√£o boa que surgiram linguagens que compilavam para rodar JVM.

_‚Äî Mas porque tudo tem que ser um objeto em Java? Quem teve essa id√©ia infeliz?_

Eu poderia colocar essa pergunta como um _age√≠smo_, mas eu prefiro o tempo _esnobismo cronol√≥gico_. Porque voc√™ est√° certo! Na minha humilde opini√£o, essa id√©ia √© infeliz! Mas sabemos disso porque a linguagem Java nos mostrou isso. Quando ela foi desenvolvida a cren√ßa comum era de que Orienta√ß√£o Objeto era a panaceia para todos os males da computa√ß√£o. Se quiser reclamar, pode! Houveram at√© ideias bem horrendas como Bando de Dados OO.

Al√©m disso houveram projetos para que os componentes fosse a principal forma de desenvolvimento de software. Na √©poca existia um grande esfor√ßo para que n√£o fosse mais necess√°rio se escrever c√≥digo. Por isso existiu um projeto, o qual n√£o lembro o nome, que prometia um software altamente customizavel sem c√≥digo. Nem preciso dizer que ele falhou completamente, mas dele surgiram algumas boas ideias como o Java Beans. 

Java Beans √© uma especifica√ß√£o que deu origem ao que conhecemos hoje como Jakarta EE. √â o falecido Java EE! √â um modelo de programa√ß√£o em que seu c√≥digo n√£o fica dependente de um framework, da mesma forma que seu c√≥digo n√£o √© dependente de uma m√°quina. Hoje √© poss√≠vel voc√™ escrever um programa para Quarkus e usar o mesmo c√≥digo para OpenLiberty.

## Instalando tudo...

N√£o gaste tempo procurando cada programa... nem mesmo o Java. Voc√™ precisa de apenas uma coisa: o [SDKMan!](https://sdkman.io/). Com ele √© poss√≠vel instalar qualquer vers√£o de Java que voc√™ deseja e algumas outras ferramentas como vamos citar mais a frente. 

Tamb√©m recomendo ter uma boa linha de comando. Se voc√™ usa Windows... Errado! Brincadeira! hehehe Voc√™ pode usar Windows, tanto que eu uso Windows (n√£o por livre e espont√¢nea vontade). No Windows voc√™ pode usar o Git Bash que √© um porte do MinGW que por sua vez √© um porte dos programas GNU para Windows.

Sobre a IDE, escolha a que voc√™ mais gosta. Todas as IDEs relavantes tem suporte a Java. Voc√™ precisa de uma IDE porque √© mais f√°cil desenvolver usando ferramentas para fazer a marca√ß√£o da linguagem (_o famoso code highlight_) e para propor c√≥digo (_o famoso auto-complete_). Desenvolvedores experientes preferem comodidade porque os problemas j√° s√£o complexos demais para ficar perdendo tempo. Eu recomendo usar ou o Eclipse, ou o Intellij Idea ou o VS Code. As tr√™s IDEs s√£o boas.

Logo em resumo, o que voc√™ precisa √©:

* SDKMan!
* Maven
* Java
* Uma boa IDE 

## Construindo meu primeiro programa Java

Ent√£o agora que voc√™ sabe que o Java √© mais que uma linguagem, vamos escrever nosso primeiro c√≥digo Java?

O erro mais comum de quem vai come√ßar em Java √© baixar uma IDE e criar um projeto Java. ü§Ø Eu fiz isso por muito tempo, at√© descobrir que √© s√≥ dor de cabe√ßa. √â mais f√°cil voc√™ usar o Maven ou o Gradle. Eu uso Maven por comodidade, j√° tive vontade de aprender Gradle, mas... Bom... 

Com o Maven voc√™ pode facilmente criar um projeto Java e compilar ele independente de IDE. O Maven tamb√©m vai se encarregar√° de encontrar todas as dep√™ncias em suas vers√µes e depend√™ncias. Ent√£o para criar um projeto Java basta criar um arquivo `pom.xml` e um arquivo Java, como na estrutura abaixo.

```
.
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îî‚îÄ‚îÄ main
‚îÇ       ‚îî‚îÄ‚îÄ java
‚îÇ           ‚îî‚îÄ‚îÄ io
‚îÇ               ‚îî‚îÄ‚îÄ vepo
‚îÇ                   ‚îî‚îÄ‚îÄ helloworld
‚îÇ                       ‚îî‚îÄ‚îÄ HelloWorld.java
‚îî‚îÄ‚îÄ pom.xml
```

Para quem n√£o conhece o Maven (_d√™ uma olhada nesse [simples tutorial](https://github.com/dev-roadmap/backend-roadmap/blob/main/caso-de-uso-00-configurando-um-projeto-quarkus.md)_), ele vai gerenciar a build do seu projetos Java. O arquivo `pom.xml` vai conter as informa√ß√µes b√°sicas do projeto e as depend√™ncias. Voc√™ pode achar estranha a estrutura de diret√≥rios, mas ela √© bastante √∫til para evitar configura√ß√µes. O Maven atua por um padr√£o chamado [Conven√ß√£o sobre configura√ß√£o](https://pt.wikipedia.org/wiki/Conven%C3%A7%C3%A3o_sobre_configura%C3%A7%C3%A3o), ao inv√™s de colocar todas as configura√ß√µes do projeto, basta seguir essa regrinha b√°sica de estrutura de diret√≥rios.

Para encontrar depend√™ncias Maven, √© poss√≠vel procurar no mvnrepository.com. Cada depend√™ncia √© definida pelas coordenadas `groupId`, `artifactId` e `version` e elas podem ser encontradas diretamente no mvnrepository.com, como √© o caso do Kafka Clientes [mvnrepository.com/artifact/org.apache.kafka/kafka-clients](https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients). Observe o padr√£o da URL, `mvnrepository.com/artifact/{groupId}/{artifactId}`. √â poss√≠vel tamb√©m adicionar a vers√£o na URL `mvnrepository.com/artifact/{groupId}/{artifactId}/{version}`. Isso facilita a busca pode depend√™ncias.

Para facilitar na execu√ß√£o, j√° estou colocando o plugin `org.codehaus.mojo:exec-maven-plugin` corretamente configurado para apontar para a classe `io.vepo.helloworld.HelloWorld`, assim para executar basta usar `mvn clean compile exec:java`.

```xml
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <groupId>io.vepo.helloworld</groupId>
    <artifactId>hello-world</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <name>Hello World!</name>
    <properties>
        <java.version>18</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.compiler.parameters>true</maven.compiler.parameters>

        <maven.compiler.source>${java.version}</maven.compiler.source>
        <maven.compiler.target>${java.version}</maven.compiler.target>
    </properties>


    <dependencyManagement>
        <dependencies></dependencies>
    </dependencyManagement>
    <dependencies>
        <!-- Procure as depend√™ncias no mvnrepository.com -->
    </dependencies>
    <build>
        <finalName>hello-world</finalName>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>3.0.0</version>
                <configuration>
                    <mainClass>io.vepo.helloworld.HelloWorld</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

Observe como √© simples... Com isso todas as configura√ß√µes ficam dispon√≠veis em um √∫nico arquivo que pode ser usado pela sua IDE preferida.

Agora √© s√≥ criar a classe como o exemplo abaixo e pronto! Execute `mvn clean compile exec:java` e voc√™ ver√° o resultado na tela.

```java
package io.vepo.helloworld;

public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
}
```

Agora caso voc√™ queira criar um programa usando um framework... Eu recomendo voc√™ procurar o tutorial desse framework. Talvez voc√™ precisar√° escrever um `main` espec√≠fico ou mesmo usar um conjunto de anota√ß√µes.

## Pr√≥ximos passos

Agora que voc√™ sabe como escrever e executar um programa Java, voc√™ pode conhecer um pouco mais da sintaxe da linguagem. Ela √© baseada na linguagem C, mas tem algumas especificadades... Eu recomendei o tutorial do [W3CSchools](https://www.w3schools.com/java/java_syntax.asp) por ter ao menos uma listagem das principais constru√ß√µes do Java 8. Tente saber como declarar uma classe, um m√©todo, vari√°veis, quais s√£o as principais estruturas de loop (`for` e `while`) e suas varia√ß√µes e por fim as estruturas l√≥gicas (`if` e `switch`).

Depois conhe√ßa ao menos alguns dos pacotes b√°sicos da linguagem, a [documenta√ß√£o](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/module-summary.html) est√° dispon√≠vel na internet. Eu recomendo que voc√™ comece pelo pacote [`java.util`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/package-summary.html) ele vai conter as classes b√°sicas de cole√ß√µes. No pr√≥ximo post vamos focar exatamente nela!
