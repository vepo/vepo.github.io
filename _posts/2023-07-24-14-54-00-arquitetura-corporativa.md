---
title: Arquitetura Corporativa
published: false
#description: Como funciona o gerenciamento de memÃ³ria com Java? Nesse post vou descrever como funciona a memÃ³ria de um programa Java e comparar ele com de outros programas. Depois vou mostrar quais os principais desafios do gerenciamento de memÃ³ria em programas Java. A ideia desta sÃ©rie Ã© criar um tutorial Java onde mostrarei todos os segredos da linguagem e do ecossistema.
tags: [Arquitetura]
cover_image: /assets/images/java/duke-paper.webp
#series: Java 101
permalink: /posts/arquitetura-corporativa
publish_date: 2023-07-24 15:55:00 +0300
---

O interesse por arquitetura de software vem caindo nos Ãºltimos anos. Isso Ã© um fato como vocÃª pode ver no grÃ¡fico abaixo. NÃ£o tenho a intenÃ§Ã£o de procurar uma explicaÃ§Ã£o para esse fato, podemos ter vÃ¡rias suposiÃ§Ãµes, mas nenhuma suposiÃ§Ã£o dessa teria seriedade se nÃ£o for submetidaa um escrutÃ­nio academico. Fazer a pergunta "porque as pessoas tem se interessado cada vez menos por arquitetura" tem que ser acompanhado de uma investigaÃ§Ã£o sÃ©ria e embasada.

![GrÃ¡fico do Google Trends sobre Arquitetura de Software e Arquitetura Corporativa](/assets/images/software-architecture.PNG)

Uma das possÃ­veis explicaÃ§Ãµes seria que hoje software Ã© tratado como uma _commodity_. As empresas que fornecem software jÃ¡ estÃ£o tÃ£o bem estabelecidas que os desenvolvedores normalizam a existÃªncia de fornecedores externos. Eles podem ser comprados, como se compra feijÃ£o na feira. EstÃ¡ tudo bem! Esse era o caminho esperado.

Mas serÃ¡ que Ã© tudo bem nÃ£o ter interesse em arquitetura de software? ğŸ¤”

Essa pergunta me surgiu quando ao acessar as redes sociais na manhÃ£ de hoje eu me deparei com duas listagem de casos de uso para Apache Kafka que o limitavam a um mecanismo de integraÃ§Ã£o. Talvez fossem pessoas que sÃ³ estavam atrÃ¡s de likes e visibilidade, pode atÃ© ser... Mas havia um indicador surpreendente! Analisei uma das publicaÃ§Ãµes e vi que ela tinha muitos compartilhamentos e ninguÃ©m comentou o Ã³bvio: ela estava incorreta!

# A funÃ§Ã£o do Apache Kafka e uma ferramenta de integraÃ§Ã£o

Sem querer entrar no mÃ©rito da publicaÃ§Ã£o, mas ela dizia em 2 dos 5 casos de uso que o Kafka poderia ser um mecanismo de integraÃ§Ã£o. Realmente o Kafka pode ser usado como um mecanismo de integraÃ§Ã£o, mas uma leitura rÃ¡pida da documentaÃ§Ã£o vai mostrar que ele Ã© muito mais que isso. A pessoa ia trazer complexidade desnecessÃ¡ria. 

Se a pessoa tivesse feita uma busca por "frameworks de integraÃ§Ã£o de dados" poderia achar o Apache Camel. O Camel Ã© feito para integraÃ§Ãµes, tem suporte para isso, deve ter produtos feito em cima dele com isso. Pronto! NÃ£o tem motivos para usar o Kafka.

Mas para que serve o Kafka e porque isso estÃ¡ em um post chamado Arquitetura Corporativa?!?!

Bom, estamos falando de Arquitetura e o Kafka Ã© a ferramenta perfeita para se construir um Barramento de Mensagens. Eu quero falar um pouco de arquitetura e subir o nÃ­vel atÃ© chegar a arquitetura corporativa.

Voltando ao tema... O Kafka pode ser usado para se CONSTRUIR um barramento de dados corporativo, distribuÃ­do e altamente escalÃ¡vel, mas para isso Ã© preciso pensar toda a infraestrutura de software de outra maneira. Primeiro devemos voltar atrÃ¡s, Ã© preciso PENSAR NA INFRAESTRUTURA! Para vocÃª entender melhor o que eu estou tentando dizer, se pergunte: **na sua empresa, tem alguÃ©m pensando em padronizaÃ§Ã£o atravÃ©s dos times e departamentos?**

Se a resposta para a pergunta anterior Ã© nÃ£o. Tudo bem. Existem empresas que padronizaÃ§Ã£o nÃ£o Ã© o foco, mas saiba que muita informaÃ§Ã£o e oportunidades podem estar sendo perdida. Voltemos ao Apache Kafka. Ele Ã© conhecido por ser o mais poderoso Middleware Orientado a Mensagens, e ao se construir aplicaÃ§Ãµes baseadas em trocas de mensagens temos um padrÃ£o arquitetural um pouco diferente do famoso cliente-servidor, ou REST.

AplicaÃ§Ãµes orientadas as mensagem pode prover um estilo arquitetural chamado Event-Driven Architecture, que Ã© bastante interessante e torna a integraÃ§Ã£o de aplicaÃ§Ãµes mais desacopladas. Essa escolha pode ser feita por um time independente, mas se dois times tem escolhas arquiteturais diferentes comeÃ§amos a montar uma torre de babel. Seria fÃ¡cil integrar 2 produtos ou duas informaÃ§Ãµes de uma empresa sem nada padronizado?

# _Data Mesh is not about software_

Quando nÃ³s paramos para olhar para histÃ³ria do processamento de dados, voltamos lÃ¡ para 2010 quando se falava que Big Data Ã© igual sexo adolescente: _todo mundo fala sobre, ninguÃ©m sabe fazer, todo mundo acha que os outros estÃ£o fazendo e todo mundo diz fazer_. 

OK! Isso Ã© um meme! Hoje ninguÃ©m mais se gaba de usar dados, as vezes as pessoas dizem ter um "data lake" sem nem ao menos saber o que Ã© um "data lake", sÃ³ porque uma consultoria disse que o produto era um "data lake". AÃ­ eu volto as perguntas retÃ³ricas: **sua empresa usa estatÃ­sticas de dados de produÃ§Ã£o?**

Um dos conceitos mais interessantes que eu vi nos Ãºltimos 2 anos foi o conceito de Data Mesh, ou Malha de Dados. Gostei tanto que resolvi escrever minha proposta de mestrado usando ele. Data Mesh Ã© um padrÃ£o arquitetural CORPORATIVO. NÃ£o Ã© um padrÃ£o arquitetural de software! Mas um padrÃ£o para empresa que deve ser implantando em software. E aqui chego ao ponto que vou tentar unificar as pontas soltas.

Para entender o que Ã© um padrÃ£o arquitetural corporativo Ã© preciso que empresa tem que ter um padrÃ£o interno de integraÃ§Ãµes alinhado com a estratÃ©gida da mesma. Ã‰ papel do CTO olhar para empresa, procurar mapear como as coisas estÃ£o sendo feitas e ver se o que estÃ¡ sendo feito atinge o alinhamento estratÃ©gico da empresa.

Vamos inventar um e-comerce ficticio para tentar descrever?

## TechMart: Um caso gerado pelo ChatGPT

Vamos supor que o e-commerce "TechMart - Sua Loja de Tecnologia Online" Ã© um e-commerce simples usando uma plataforma paga e sem muitos recursos. Com apenas 2 anos de existÃªncia teve um crescimento expressivo e resolveu profissionalizar sua gestÃ£o. O corpo de diretores se reuniu e definiu qual serÃ¡ a MissÃ£o, VisÃ£o e Valores da empresa assim como quais sÃ£o os objetivos de curto e mÃ©dio prazo.

> ## MissÃ£o:
> Oferecer aos nossos clientes uma experiÃªncia de compra online excepcional, fornecendo os mais modernos produtos eletrÃ´nicos do mercado, garantindo a qualidade e a autenticidade dos produtos, e proporcionando um atendimento ao cliente de excelÃªncia. Esse foi o documento criado nessa reuniÃ£o:
> 
> ## VisÃ£o:
> Ser reconhecido como o e-commerce lÃ­der no segmento de tecnologia, sendo a primeira escolha dos consumidores quando buscam produtos eletrÃ´nicos inovadores, alÃ©m de ser referÃªncia em atendimento ao cliente e responsabilidade ambiental.
> 
> ## Valores:
>
> 1. **Qualidade e ConfianÃ§a**: Compromisso com a venda apenas de produtos de alta qualidade e originais, garantindo a satisfaÃ§Ã£o e a confianÃ§a dos nossos clientes.
> 2. **Atendimento ao Cliente**: Colocar o cliente em primeiro lugar, oferecendo um atendimento excepcional, ouvindo suas necessidades e solucionando seus problemas com agilidade e eficiÃªncia.
> 3. **InovaÃ§Ã£o e Tecnologia**: Manter-se atualizado com as Ãºltimas tendÃªncias em tecnologia e oferecer aos nossos clientes produtos inovadores e de ponta.
> 4. **Responsabilidade Ambiental**: Ser ecologicamente responsÃ¡vel, adotando prÃ¡ticas sustentÃ¡veis, utilizando embalagens amigÃ¡veis ao meio ambiente e buscando parcerias com fabricantes comprometidos com aÃ§Ãµes ecolÃ³gicas.
> 5. **TransparÃªncia e Ã‰tica**: Agir com integridade em todas as nossas operaÃ§Ãµes, sendo transparentes em nossas polÃ­ticas e prÃ¡ticas de negÃ³cio.
> 6. **Foco no Cliente**: Entender as necessidades dos nossos clientes e superar suas expectativas, buscando a sua satisfaÃ§Ã£o em todas as etapas da jornada de compra.
> 7. **ValorizaÃ§Ã£o dos Colaboradores**: Reconhecer e valorizar nossos colaboradores, proporcionando um ambiente de trabalho estimulante, inclusivo e de crescimento profissional.

E esses foram os objetivos de mÃ©dio e longo prazo definidos pelo corpo de diretores:

> ## Objetivos de MÃ©dio Prazo (3 a 5 anos):
> 1. **Crescimento das Vendas**: Aumentar significativamente o volume de vendas anuais, atraindo novos clientes e fidelizando os clientes existentes.
> 2. **ExpansÃ£o do Mix de Produtos**: Ampliar a variedade de produtos oferecidos para abranger outras categorias relacionadas Ã  tecnologia, como gadgets inteligentes, produtos de realidade virtual e dispositivos de automaÃ§Ã£o residencial.
> 3. **Cobertura GeogrÃ¡fica**: Expandir a Ã¡rea de entrega para atender a um maior nÃºmero de regiÃµes e paÃ­ses, possibilitando que mais clientes tenham acesso aos produtos do TechMart.
> 4. **LideranÃ§a em Atendimento ao Cliente**: Tornar-se lÃ­der no segmento de atendimento ao cliente, investindo em treinamento de equipe, tecnologias de suporte e soluÃ§Ãµes para garantir a mÃ¡xima satisfaÃ§Ã£o dos clientes.
> 5. **Parcerias EstratÃ©gicas**: Estabelecer parcerias com fabricantes e fornecedores de renome, garantindo acesso exclusivo a produtos inovadores e condiÃ§Ãµes comerciais vantajosas.
> 6. **Reconhecimento da Marca**: Fortalecer a marca TechMart no mercado, tornando-a sinÃ´nimo de qualidade, confianÃ§a e inovaÃ§Ã£o.
>
> ## Objetivos de Longo Prazo (5 a 10 anos):
>
> 1. **ExpansÃ£o Global**: Tornar-se uma referÃªncia global em e-commerce de tecnologia, expandindo a atuaÃ§Ã£o para diversos paÃ­ses ao redor do mundo.
> 2. **DiversificaÃ§Ã£o de NegÃ³cios**: Diversificar as atividades da empresa, explorando oportunidades em serviÃ§os de assistÃªncia tÃ©cnica, programas de troca e reciclagem de dispositivos eletrÃ´nicos usados, entre outros.
> 3. **InovaÃ§Ã£o TecnolÃ³gica**: Investir em pesquisa e desenvolvimento para criar produtos e serviÃ§os prÃ³prios, impulsionando a inovaÃ§Ã£o e diferenciando o TechMart da concorrÃªncia.
> 4. **Sustentabilidade Total**: Tornar-se uma empresa totalmente sustentÃ¡vel, desde a gestÃ£o interna atÃ© a logÃ­stica de entrega, minimizando o impacto ambiental e promovendo prÃ¡ticas sustentÃ¡veis em toda a cadeia de valor.
> 5. **ServiÃ§os Personalizados**: Oferecer serviÃ§os personalizados, como assistÃªncia tÃ©cnica especializada, recomendaÃ§Ãµes de produtos baseadas no perfil do cliente e programas de fidelidade aprimorados.
> 6. **Responsabilidade Social**: Desenvolver programas de responsabilidade social corporativa, apoiando iniciativas de educaÃ§Ã£o, inclusÃ£o digital e outras causas relacionadas Ã  tecnologia e Ã  comunidade.

Nessa reuniÃ£o foi tambÃ©m definida que a empresa seria fortemente orientada a dados e para isso todos os departamentos deveriam expor dados para consumidos por outros departamentos. Ao CTO ficou a responsabilidade de definir como seria essa implantaÃ§Ã£o dessa politica, assim como para o COO ficou de definir como seria o redesenho dos departamentos.

VocÃª jÃ¡ deve tÃ¡ pensando que Ã© sÃ³ o CTO dizer que agora todo mundo usa Kafka tÃ¡ feito, nÃ©? ERRADO!

Esse Ã© o momento que o CTO deve olhar para o estado atual da empresa e mapear:

1. Quais sÃ£o os dados que a empresa tem hoje.
2. Como eles sÃ£o expostos.
3. Quem gera esses dados e como gera esses dados.
4. Quem consome esses dados e qual a forma que consome.
5. Que tipos de soluÃ§Ã£o a empresa tem? Elas sÃ£o criadas internamente ou externamente? Quais as limitaÃ§Ãµes?
6. Qual o potencial que a empresa tem de desenvolvimento baseado nos recursos humanos?

Desse mapeamento serÃ¡ gerado algo que podemos definir como Arquitetura AS-IS. Ou seja, Ã© a arquitetura atual da empresa, nÃ£o sÃ³ de software, mas de capacitaÃ§Ã£o tambÃ©m.

O CTO dessa empresa fez a liÃ§Ã£o de casa e chegou a conclusÃ£o que existem poucas soluÃ§Ãµes feitas em casa, tudo Ã© integraÃ§Ã£o usando serviÃ§o de prateleira com APIs REST que gastam muito tempo e dinheiro em integraÃ§Ãµes. Para atingir o objetivo que foi deletado a ele, o CTO viu que Data Mesh Ã© uma boa soluÃ§Ã£o, para isso ele definiu que o time de arquitetura deveria criar um modelo de maturidade para avaliar se os serviÃ§os internos estÃ£o adequados ao que a empresa deseja ou nÃ£o.

Como na definiÃ§Ã£o de Data Mesh dados sÃ£o tratados como um produto, o CTO estabeleceu a criaÃ§Ã£o de um time de ferramentas que iria criar um framework para integraÃ§Ãµes que pudesse:

1. Ser usado por todos os times para expor seus dados internos.
2. Ser usado por todos os times para consumir dados de outros times.
3. Desse visibilidade aos nÃ­vel gerencial para fazer buscas simples ou montar dashboards.
4. Fosse atualizado em tempo real.

Esse time decidiu que o Apache Kafka era a soluÃ§Ã£o perfeita como barramento e por isso ele comeÃ§ou a ser usado largamente dentro da empresa. Em um primeiro momento ele foi imposto aos times e o time de integraÃ§Ãµes viu que comeÃ§ou a haver uma resistÃªncia dos outros times. Para isso o CTO comeÃ§ou um programa de capacitaÃ§Ã£o em [ProgramaÃ§Ã£o Reativa](https://www.reactivemanifesto.org/pt-BR) para que todos os processos e produtos tivessem aderÃªncia a nova arquitetura. Agora todos observar se as soluÃ§Ãµes eram Responsivas, ElÃ¡sticas e Resilientes, para isso foi feito algumas palestras internas sobre como sistemas poderiam migrar de uma arquitetura cliente-servidor padrÃ£o para uma arquitetura Orientada a Mensagens.

Depois de 1 ano, os times tinham soluÃ§Ãµes orientadas a mensagens com a capacidade de geraÃ§Ã£o de estatisticas em tempo real. Com isso o corpo diretivo comeÃ§ou a ter uma visibilidade de alguns dados para a tomada de decisÃ£o.

## AnÃ¡lise do caso TechMart

Esse caso foi ficticio e eu queria ilustrar o que Ã© arquitetura corporativa. Empresa devem ter uma MissÃ£o, VisÃ£o e Valores estabelecidos, e dessas informaÃ§Ãµes sÃ£o gerados objetivos de curto, mÃ©dio e longo prazo. Ao CTO cabe nÃ£o sÃ³ a funÃ§Ã£o e gerir as tecnologias da empresa, mas como Ã© o processo de desenvolvimento da tecnologia e os dados gerados. E foi assim que no TechMart o CTO conseguiu que a empresa comeÃ§asse a gerar dados para que a empresa pudesse verificar se os objetivos eram plausÃ­veis e estavam sendo atingidos.

A arquitetura de software da empresa foi mudando aos poucos direcionada pela gestÃ£o para atingir um objetivo de gestÃ£o.