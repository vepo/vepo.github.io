<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="https://blog.vepo.dev/feed/by_tag/Beginners.xml" rel="self" type="application/atom+xml" /><link href="https://blog.vepo.dev/" rel="alternate" type="text/html" /><updated>2025-10-07T11:58:40+00:00</updated><id>https://blog.vepo.dev/feed/by_tag/Beginners.xml</id><title type="html">vepo</title><subtitle>Um repositÃ³rio para todos os posts, palestras e tutoriais que jÃ¡ fiz. Java, Desenvolvimento de Software e reflexÃµes sobre filosofia</subtitle><author><name>{&quot;twitter&quot;=&gt;&quot;vepo&quot;, &quot;linkedin&quot;=&gt;&quot;https://www.linkedin.com/in/victorosorio/&quot;, &quot;picture&quot;=&gt;&quot;/assets/images/me.avif&quot;}</name></author><entry><title type="html">Trabalhando com dinheiro!</title><link href="https://blog.vepo.dev/posts/trabalhando-com-dinheiro" rel="alternate" type="text/html" title="Trabalhando com dinheiro!" /><published>2020-05-05T00:00:00+00:00</published><updated>2020-05-05T00:00:00+00:00</updated><id>https://blog.vepo.dev/posts/19-10-09-trabalhando-com-dinheiro</id><content type="html" xml:base="https://blog.vepo.dev/posts/trabalhando-com-dinheiro"><![CDATA[<p>NinguÃ©m nasce SÃªnior, se torna SÃªnior!</p>

<p>Se tornar um SÃªnior Ã© um processo demorado, e requer muito suor. Como o mercado de computaÃ§Ã£o tem se expandido exponencialmente, resolvi comeÃ§ar uma sÃ©rie de posts rÃ¡pidos sobre tudo que um SÃªnior deve saber. Vamos ao primeiroâ€¦.</p>

<h1 id="como-lidar-com-dinheiro">Como lidar com dinheiro?</h1>

<p>Quando vamos modelar um Objeto ou qualquer outro domÃ­nio, sempre imaginamos o tipo de dado antes mesmo de comeÃ§ar a escrever o dado.</p>

<p>Sabemos que nome Ã© <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html">String</a>, sobrenome Ã© String, data de nascimento Ã© um <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html">Date</a>, data de ativaÃ§Ã£o serÃ¡ um <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#currentTimeMillis()">long</a>, ou <a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps">Timestamp</a>. Podemos atÃ©, em algumas linguagens ter dÃºvida se usamos um <a href="https://dev.mysql.com/doc/refman/8.0/en/datetime.html">Date ou Datetime</a>. Mas tudo isso depende da linguagem escolhida, certo?</p>

<p>Errado!</p>

<p>Tudo depende da forma como o valor Ã© armazenado em bytes. Sim! VocÃª acha que existe um valor inteiro? Ou string? NÃ£o, existem bytes! Somente bytes! E esses valores sÃ£o representados em bytes. Um inteiro por exemplo sÃ£o 4 bytes alinhados. Assim um inteiro 0 Ã© 00000000 00000000 00000000 00000000. Em Java um short 0 Ã© 00000000 00000000. FÃ¡cil? Nem tantoâ€¦</p>

<p>Lembra dos <a href="hhttps://pt.wikipedia.org/wiki/N%C3%BAmero#Conjuntos_num%C3%A9ricos">conjuntos numÃ©ricos da matemÃ¡tica</a>? Pois bem, nÃºmeros inteiros sÃ£o fÃ¡ceis, agora e os outros?</p>

<p>Quando eu preciso de um valor nÃ£o exato, um float por exemplo? Sabe como Ã© armazenado? Usando a notaÃ§Ã£o <em><a href="https://pt.wikipedia.org/wiki/V%C3%ADrgula_flutuante">floating point</a></em>.</p>

<p>EntÃ£o qualquer valores de dinheiro devem ser guardados em Float, certo?</p>

<p>Errado!</p>

<p>Vamos olhar bem de perto algumas operaÃ§Ãµes do float ou double.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/sf352axsulk7dvwb1lsp.png" alt="Alt Text" /></p>

<p>Entendeu porque <code class="language-plaintext highlighter-rouge">2.01 + 2.01 + 2.01 + 2.01 + 2.001 = 10.040999999999999</code>? E nÃ£o <code class="language-plaintext highlighter-rouge">â€­10.041â€¬</code>? ğŸ™„ğŸ™„ğŸ™„</p>

<h2 id="float-point-precision-problem">Float Point precision problem</h2>

<p>Sim, esse Ã© um erro bastante conhecido. VocÃª pode pesquisar por ele na internet. Ele aparece quando sÃ£o feitas vÃ¡rias operaÃ§Ãµes com Floating Point.</p>

<p>JÃ¡ vi ocorrer em sistemas em produÃ§Ã£o. Era um sistema de controle de estoque e compras. Havia vÃ¡rias ordem de compras, mas o valor vendido nÃ£o batia com o caixa. Esse erro se deu em uma conta simple com 5 valores. Agora e se tivessemos 5.000 valores?</p>

<p>Vamos verâ€¦ E se somassemos <code class="language-plaintext highlighter-rouge">5.000</code> vezes <code class="language-plaintext highlighter-rouge">2.01</code>? Deveria dar <code class="language-plaintext highlighter-rouge">10.050</code>.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hz8c16fl3d4gg0bifxp5.png" alt="Alt Text" /></p>

<p>Opa! Tivemos um erro de <code class="language-plaintext highlighter-rouge">0,676</code>! ğŸ˜®ğŸ˜®ğŸ˜®ğŸ˜®ğŸ˜®</p>

<h2 id="soluÃ§Ã£o-em-java">SoluÃ§Ã£o em Java</h2>

<p>Mas vamos com calma. Em Java esse problema foi resolvido com a criaÃ§Ã£o da classe <code class="language-plaintext highlighter-rouge">BigDecimal</code>.</p>

<p>Nenhuma operaÃ§Ã£o monetÃ¡ria deve ser feita com <code class="language-plaintext highlighter-rouge">float</code> ou <code class="language-plaintext highlighter-rouge">decimal</code> em hipotese alguma. Esse valores devem ser lidos como <a href="https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html">BigDecimal</a>.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/mqsny7pz70a1tglj2pms.png" alt="Alt Text" /></p>

<h3 id="fique-atento">Fique Atento</h3>

<ol>
  <li>Se esse valor for instanciado com um <code class="language-plaintext highlighter-rouge">double</code> ou <code class="language-plaintext highlighter-rouge">float</code> irÃ¡ herdar a imprecisÃ£o do valor original.</li>
  <li>Essa classe Ã© imutÃ¡vel, entÃ£o fique atento. Se vocÃª chamar os metodos, nÃ£o irÃ¡ alterar o valor da instÃ¢ncia, apenas criar uma nova!</li>
</ol>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/e7822k278vxr9gdeyc0p.png" alt="Alt Text" /></p>

<h1 id="conclusÃ£o">ConclusÃ£o</h1>

<p>Guarde pra vida toda. Nunca armazene valores monetÃ¡rios em <code class="language-plaintext highlighter-rouge">double</code> ou <code class="language-plaintext highlighter-rouge">float</code>. NÃ£o importa a linguagem ou base de dados que vocÃª estÃ¡ usando.</p>

<p>Caso nÃ£o saiba como resolver esse problema. NÃ£o se preocupe Ã© normal. AmanhÃ£ vai surgir uma linguagem nova ou uma base de dados nova e 99,99999% dos desenvolvedores nÃ£o sabaerÃ£o tambÃ©m. <a href="http://letmegooglethat.com/?q=cobol+floating+point+precision">Pesquise no Google</a>.</p>]]></content><author><name>{&quot;twitter&quot;=&gt;&quot;vepo&quot;, &quot;linkedin&quot;=&gt;&quot;https://www.linkedin.com/in/victorosorio/&quot;, &quot;picture&quot;=&gt;&quot;/assets/images/me.avif&quot;}</name></author><category term="Java" /><category term="Floating Point" /><category term="Money" /><category term="Beginners" /><summary type="html"><![CDATA[Todo sÃªnio deve saber lidar com valores monetÃ¡rios em seu cÃ³digo. NÃ£o sabe? Tem ensino! ğŸ˜€]]></summary></entry></feed>