<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="https://blog.vepo.dev/feed/by_tag/AIOps.xml" rel="self" type="application/atom+xml" /><link href="https://blog.vepo.dev/" rel="alternate" type="text/html" /><updated>2025-10-07T11:58:40+00:00</updated><id>https://blog.vepo.dev/feed/by_tag/AIOps.xml</id><title type="html">vepo</title><subtitle>Um reposit√≥rio para todos os posts, palestras e tutoriais que j√° fiz. Java, Desenvolvimento de Software e reflex√µes sobre filosofia</subtitle><author><name>{&quot;twitter&quot;=&gt;&quot;vepo&quot;, &quot;linkedin&quot;=&gt;&quot;https://www.linkedin.com/in/victorosorio/&quot;, &quot;picture&quot;=&gt;&quot;/assets/images/me.avif&quot;}</name></author><entry><title type="html">Jornada AIOps</title><link href="https://blog.vepo.dev/posts/jornada-aiops" rel="alternate" type="text/html" title="Jornada AIOps" /><published>2021-08-30T00:00:00+00:00</published><updated>2021-08-30T00:00:00+00:00</updated><id>https://blog.vepo.dev/posts/10-42-00-jornada-aiops</id><content type="html" xml:base="https://blog.vepo.dev/posts/jornada-aiops"><![CDATA[<p>No √∫ltimo s√°bado terminamos (eu e meu grupo) o MBA da FIAP de Arquitetura de Software como campe√µes do desafio principal. Preciso confessar que est√°vamos completamente c√©ticos em rela√ß√£o a qualquer pr√™mio por dois motivos. O primeiro √© que n√£o entregamos o que foi pedido e o segundo √© que a nossa proposi√ß√£o de arquitetura era o mais simples poss√≠vel. Mas vou descrever essa jornada.</p>

<h1 id="o-desafio">O Desafio</h1>

<p>Na verdade era um <em>Chalenge</em>, mas como eu me recuso a usar termos estrangeiros se temos bons termos em pt-BR, mas vou chamar de desafio mesmo! üòÄ</p>

<p>Um banco que existe antes das FinTechs, mas que cresceu na era das FinTechs, apresentou uma proposta de melhoria da sua gest√£o de infraestrutura: <strong><em>‚Äúqueremos AIOps‚Äù</em></strong>. A proposta parecia gen√©rica, e realmente era. Tudo que eles pediam era uma apresenta√ß√£o da arquitetura proposta com um demonstra√ß√£o. Eles focaram que era algo HandsOn! Queriam ver funcionando no dia da entrega. N√£o havia nada mais especificado.</p>

<p>Durante as mentorias, conseguimos levantar alguns pontos da infraestrutura do banco. Eles usavam um provedor de Cloud que j√° tinham escolhidos como principal fornecedor. E usavam duas ferramentas, uma para APM e outra para monitoramento de rede. N√£o conhec√≠amos e nunca t√≠nhamos usado nenhuma dessas ferramentas, para ser sincero, durante minha carreira eu tive pouco contato com software em produ√ß√£o, ent√£o monitoramento √© uma fraqueza. S√≥ usei o NewRelic e fiz alguns deploys usando a plataforma ELK. Mas isso n√£o me d√° a vis√£o de uma infraestrutura completa para um banco.</p>

<h1 id="decis√µes-iniciais-e-defini√ß√µes">Decis√µes iniciais e Defini√ß√µes</h1>

<p>Na conversa com o grupo chegamos a primeira conclus√£o: <em>o desafio √© vago</em>. Se entregarmos algo HandsOn, √© bem prov√°vel que cubra todos os requisitos e podemos at√© ganhar, mas ao encarar o primeiro trade-off, pode ser completamente descartado. Ent√£o fizemos a primeira pergunta: <em>como entregar algo que com certeza n√£o vai ser jogado fora?</em> Era hora de pesquisar.</p>

<p>A primeira defini√ß√£o que encontramos foi do <a href="https://www.gartner.com/en/information-technology/glossary/aiops-artificial-intelligence-operations">Gartner</a>, na verdade foi a √∫nica que fomos atr√°s. N√£o fomos atr√°s de outras defini√ß√£o por um motivo bem simples: <strong>fugir do papo de vendedor</strong>. Normalmente quem escreve sobre um assunto √© quem vende um produto relacionado, e muitos desses ‚Äúwhite-papers‚Äù est√£o na verdade n√£o apaixonados pelo problema, mas vendendo uma solu√ß√£o.</p>

<blockquote>
  <p><em>AIOps combines big data and machine learning to automate IT operations processes, including event correlation, anomaly detection and causality determination.</em></p>
</blockquote>

<p>Segundo o Gartner, AIOps envolve eventos. AIOps come√ßa quando eventos podem ser colocados dentro um algoritmos de Machine Learning. Nesse ponto informamos claramente para a equipe do banco: <em>pode tirar o cavalinho da chuva que n√£o vai ser f√°cil</em>. Pois √©, ao inv√©s de vendermos nossa solu√ß√£o, falamos a verdade. Para criar um solu√ß√£o robusta de AIOps era preciso catalogar dados, criar eventos e treinar uma rede neural.</p>

<h1 id="conhece-te-a-ti-mesmo"><em>‚ÄúConhece-te a ti mesmo‚Äù</em></h1>

<p>O segundo passo foi criar um meio de auto avalia√ß√£o. N√£o faz sentido apresentarmos uma solu√ß√£o para uma empresa e ela mesmo n√£o conseguir avaliar se a solu√ß√£o permitia AIOps ou n√£o. Logo procuramos se existe algum modelo de maturidade para AIOps.</p>

<p>Se voc√™ nunca parou para olhar o que √© um modelo de maturidade, recomendo fortemente que procure algum. Voc√™ pode encontrar facilmente para Metodologias √Ågil e DevOps. Na maioria dos casos come√ßar a fazer algo n√£o significa apenas usar ferramentas, mas entender o problema e saber como a ferramenta pode de ajudar a implementar uma politica.</p>

<p>Ao procurar um bom modelo de maturidade tivemos o mesmo problema com a defini√ß√£o: <em>papo de vendedor</em>. Normalmente quem produz um modelo de maturidade quer validar a pr√≥pria ferramenta e n√£o avaliar a adequa√ß√£o do problema com a solu√ß√£o. O problema √© que a solu√ß√£o proposta vai sempre levar ao n√≠vel mais alto, pois todas as defici√™ncias da solu√ß√£o ser√£o propositadamente omitidas. Ent√£o passamos a segunda, terceira, quarta, etc‚Ä¶ p√°gina do google para encontrar um modelo que fosse realmente abrangente.</p>

<p>Assim pudemos propor o seguinte modelo:</p>

<ul>
  <li>N√≠vel 0 - Caos
    <ul>
      <li>Sem dados</li>
      <li>Sem an√°lises</li>
      <li>Sem automa√ß√£o</li>
    </ul>
  </li>
  <li>N√≠vel 1 - Coleta
    <ul>
      <li>Servi√ßos com suporte a coleta de informa√ß√µes de opera√ß√£o</li>
    </ul>
  </li>
  <li>N√≠vel 2 - Consolida√ß√£o
    <ul>
      <li>Dados da opera√ß√£o centralizados</li>
      <li>Identifica√ß√£o manual de erros</li>
      <li>Constru√ß√£o manual de dashboards</li>
    </ul>
  </li>
  <li>N√≠vel 3 - Contextualiza√ß√£o
    <ul>
      <li>Extra√ß√£o de informa√ß√µes dos dados</li>
      <li>Identifica√ß√£o autom√°tica de erros</li>
      <li>Estat√≠sticas n√£o supervisionadas</li>
      <li>Automa√ß√£o bi-direcional (ITSM)</li>
    </ul>
  </li>
  <li>N√≠vel 4 - Conselho
    <ul>
      <li>Recomenda√ß√£o de fontes de dados</li>
      <li>Recomenda√ß√µes de an√°lises e correla√ß√µes</li>
      <li>Automa√ß√£o de m√∫ltiplos passos</li>
    </ul>
  </li>
  <li>N√≠vel 5 - Aut√¥mato
    <ul>
      <li>Otimiza√ß√£o proativa</li>
      <li>Tuning de performance</li>
      <li>Solu√ß√£o autom√°tica de problemas</li>
      <li>Automa√ß√£o Closed-Loop</li>
    </ul>
  </li>
</ul>

<p>√â muito importante que o modelo de maturidade seja devidamente apresentado a empresa, porque muitos entendem que podem chegar ao n√≠vel m√°ximo apenas usando algumas ferramentas. ISSO √â UM MITO! Todo maturidade chega atrav√©s de muito esfor√ßo e mudan√ßas graduais. √â bem prov√°vel que a maioria das empresas esteja no n√≠vel 0, mas se simplesmente falarmos que elas vivem o Caos j√° perdemos o cliente. Porque na verdade nenhuma empresa s√©ria vive o Caos, eles podem at√© estar nessa fase, mas j√° criaram uma s√©rie de processos para garantir que o caos seja controlado. O que acontece √© que a empresa caminha para o lado no modelo de maturidade, ao inv√©s de andar para o n√≠vel 1, ela vai criar processos que engessem o caos tornando ele extremamente burocr√°tico.</p>

<p>Quer um exemplo dessa burocracia? Uns 5 anos atr√°s eu vi uma palestra de um IT Leader (termo gen√©rico, n√£o!?) contando como foi a migra√ß√£o de todos os servi√ßos da empresa para nuvem. A apresenta√ß√£o de cerca de 50 minutos n√£o contou com nenhuma defini√ß√£o, padr√£o estabelecido ou mesmo conceito. N√£o falaram de Cloud Native, Microservices, etc‚Ä¶ Como a empresa fez? Replicou tudo na nuvem e foi verificando se o servi√ßo replicado na nuvem era igual ao executado on-premise. Ora, qual foi o custo disso?!!? Depois eles migraram pra nuvem e mantiveram o on-premise ainda em atividade para garantir um fallback. Eu n√£o quero saber quantas noites esses infelizes perderam por n√£o estudar o conceito de Cloud Native que j√° tem uns 10 anos, ou por n√£o ter estabelecido um padr√£o para toda a aplica√ß√£o.</p>

<p>Com o modelo de maturidade acima, a empresa poderia criar um planejamento para andar entre as fases.</p>

<h1 id="escolhas-de-ferramentas">Escolhas de ferramentas</h1>

<p>O pr√≥ximo passo era escolher ferramentas que pudessem possibilitar a implanta√ß√£o de cada n√≠vel do AIOps. Para isso fizemos um grande levantamento. Quem pode ajudar em cada linha do nosso modelo de maturidade? Fizemos a lista de todos os nomes e come√ßamos a jogar em um diagrama. Mas para fazer uma integra√ß√£o n√£o √© s√≥ criar uma seta num diagrama <a href="https://www.opengroup.org/archimate-forum/archimate-overview">ArchiMate</a>, √© muito f√°cil criar diagramas mas √© bastante complexo colocar eles em funcionamento.</p>

<p>Logo come√ßamos uma busca intensiva por toda a documenta√ß√£o de todas as ferramentas com a seguinte pergunta: <em>como eu integro a ferramenta A na ferramenta B?</em> Com essa an√°lise simples, j√° pudemos dividir as ferramentas em conjuntos de poss√≠veis solu√ß√µes. Mas j√° no come√ßo sab√≠amos de algumas limita√ß√µes, pois o banco j√° usava duas ferramentas e escolhido o provedor Cloud. Assim todas as solu√ß√µes deveriam incluir essas duas ferramentas e esse provedor cloud.</p>

<h1 id="a-decis√£o-dif√≠cil">A decis√£o dif√≠cil</h1>

<p>Entre as v√°rias op√ß√µes arquiteturais, t√≠nhamos algumas plataformas Open Source e v√°rias empresas oferecendo servi√ßos.</p>

<p>Escolher uma solu√ß√£o open source seria minha escolha de cora√ß√£o, mas isso requer bastante trabalho para implantar. Muitas vezes acreditamos que √© f√°cil montar uma equipe com bons desenvolvedores que entendem de plataformas open source e s√£o h√°beis em pesquisar solu√ß√µes na internet. Mas na verdade o mercado √© bem diferente da nossa bolha. A grande maioria dos desenvolvedores n√£o tem essa habilidade, n√£o conseguem entender os protocolos e muitos n√£o entendem nada em ingl√™s. Logo a solu√ß√£o precisava ser provida por uma empresa que daria um bom suporte.</p>

<p>E sobre ter v√°rias empresas, isso √© realmente bom‚Ä¶ MAS‚Ä¶ O que observamos no passo anterior foi que as pr√≥prias empresas que proveem servi√ßos de observabilidade est√£o se fechando em silos propositadamente. A empresa sabe que se ela os produtos A e B, se ela prover integra√ß√£o do produto A com o B da concorr√™ncia, ela vai perder mercador. Logo as empresas que tem produtos lideres de mercado est√£o removendo possibilidades de integra√ß√£o. N√≥s verificamos isso fazendo uma correla√ß√£o de datas de lan√ßamento de produtos, posts de blogs e documenta√ß√£o. Quando a empresa lan√ßa um produto, ela retira a possibilidade de integra√ß√£o da documenta√ß√£o e os posts de blogs anteriores a data de lan√ßamento do produto v√£o possuir links inv√°lidos. O que isso significa?</p>

<p>Se escolh√™ssemos as melhores ferramentas para cada passo, ter√≠amos uma grande dificuldade de evoluir pois cada integra√ß√£o seria custosa. Ent√£o era mais f√°cil aceitar o Vendor Lock-In para podermos propor uma arquitetura f√°cil e r√°pida de se implantar. Depois de implantada a empresa poderia avaliar uma troca de servi√ßo. Assim decidimos que todas os servi√ßos deveriam ser do pr√≥prio provedor de Cloud, que nesse caso era a AWS.</p>

<p>Usando o mesmo provedor de servi√ßos evitamos silos de dados. Se a ferramenta de AIOps s√≥ precisar olhar para um local √© muito mais f√°cil de manter e evoluir a solu√ß√£o.</p>

<h1 id="cria√ß√£o-de-um-plano">Cria√ß√£o de um plano</h1>

<p>Eu sempre digo que se temos um plano, temos tudo. Ter um plano √© como viajar para um lugar desconhecido com um mapa, mesmo se pegarmos o caminho errado, √© poss√≠vel reavaliar e propor uma nova rota. Todo plano pode ser reavaliado.</p>

<p>Dados os n√≠veis de maturidade come√ßamos a escolher ponto a ponto de como integrar. Primeiro era preciso ter dados! Por isso propusemos um escolha que todos os microsservi√ßos deveriam expor seus dados em formato <a href="https://prometheus.io/docs/introduction/overview/">Prometheus</a>. N√£o vamos usar o Prometheus, mesmo sendo uma das possibilidades, mas percebemos que todos os servi√ßos est√£o abertos a se integrar com solu√ß√µes open source. Todo servi√ßo deve ser Cloud Native, seguir os 12 Fatores e usar um framework moderno. Como exemplo criei um servi√ßo de registro de pagamento bem simples usando <a href="http://quarkus.io/">Quarkus.io</a>, <a href="https://www.postgresql.org/">PostgreSQL</a> com JPA Panache, <a href="https://blog.vepo.dev/posts/using-bean-Validation-on-quarkus">Jakarta Bean Validation</a>, <a href="https://quarkus.io/guides/smallrye-metrics">MicroProfile Metrics</a>, <a href="https://quarkus.io/guides/smallrye-health">MicroProfile Health</a> e <a href="https://www.openapis.org/">OpenAPI</a>. Usando o esqueleto de microsservi√ßo j√° atingimos o n√≠vel 1, habilitando a coleta de informa√ß√µes.</p>

<p>O pr√≥ximo passo √© consolidar todos esses dados em um s√≥ local. √â muito importante que seja um s√≥ local, pois isso facilitar√° a implementa√ß√£o. Para isso escolhemos o AWS CloudWatch, porque ele √© o servi√ßo que faz isso nativamente para Amazon. Se precisamos coletar dados de servidores on-premise, podemos usar o AWS CloudWatch Agente para coletar todos os dados e salvar no mesmo <em>‚Äúlake‚Äù</em>.</p>

<p>Lembra que a empresa j√° possu√≠a alguns servi√ßos de monitoramento? Esses servi√ßos n√£o poderiam ser facilmente integrados, n√£o h√° suporte. Por isso propusemos exportar os dados em formato Prometheus, que podem ser coletado pelo AWS CloudWatch Agente e, al√©m disso, criar eventos e alarmes que podem ser enviados via API para o AWS CloudWatch. Esses servi√ßos podem ser usados, mas a integra√ß√£o n√£o vai ser nativa.</p>

<p>Usando apenas o AWS CloudWatch j√° √© poss√≠vel criar um dashboard com as informa√ß√µes principais do ecossistema. √â poss√≠vel tamb√©m identificar erros e criar eventos e alertas baseado em padr√µes de logs, correla√ß√£o de eventos, etc‚Ä¶ A escolha do AWS CloudWatch por se s√≥ j√° leva ao n√≠vel 2, mas ser√° preciso uma fase de cria√ß√£o de dashboards, eventos e alertas para chegar a plenitude do n√≠vel 2 e depois chegar ao n√≠vel 3, contextualizando dados e logs.</p>

<p>Um ponto interessante que eu n√£o tinha nem ideia, √© que o sistema banc√°rio √© super regulamentado. Agrade√ßa a essa regulamenta√ß√£o por n√£o termos tido crise nos anos 2008/09. Essa regulamenta√ß√£o vem l√° dos anos 90, quando v√°rios bancos quebraram por pura picaretagem dos seus diretores. Quem tem mais de 35 vai se <a href="https://pt.wikipedia.org/wiki/Salvatore_Cacciola">lembrar</a> de v√°rios homens branco classe AAA+++++ sendo presos, mans√µes sendo leiloadas, etc‚Ä¶ Bom, dessa regulamenta√ß√£o vem um r√≠gido processo de ITSM, isso significa que nenhuma opera√ß√£o na produ√ß√£o deve ser feita sem um rastreamento. Por isso precisamos escolher uma ferramenta de ITSM externa a AWS, mas que pode ser integrada vai API usando Lambda. Com alertas e fun√ß√µes lambdas √© poss√≠vel automatizar v√°rias opera√ß√µes tanto na nuvem quanto em on premise.</p>

<p>Para finalizar, propomos o uso do AWS DevOps Guru, um produto da pr√≥pria AWS que promete magicamente habilitar o AIOps. Mas fomos bem c√©tico nesse uso. Ao propor j√° avisamos que nenhuma solu√ß√£o de Machine Learning vem de gra√ßa, tem que ter uma base tageada e treinamento de modelos. N√£o fizemos nenhuma PoC usando o DevOps Guru, apenas propomos e ainda dissemos para s√≥ habilitar quando todo o dever de casa estiver feito.</p>

<p><img src="/assets/images/aws-devops-guru.png" alt="AWS DevOps Guru" /></p>

<p>Essa solu√ß√£o √© propositadamente simples.</p>

<h1 id="outras-solu√ß√µes">Outras solu√ß√µes</h1>

<p>N√£o t√≠nhamos nenhuma esperan√ßa de ganhar e quando come√ßaram as apresenta√ß√µes percebemos claramente que n√£o iriamos ganhar. Todas as solu√ß√µes eram extremamente complexas, usavam ao menos 10 produtos diferentes. Teve um grupo que chegou a propor uma integra√ß√£o plugando um Apache Kafka no AWS CloudWatch, nessa hora eu peguei minha garrafa de √°gua pra ver se algu√©m tinha colocado drogas ou se o grupo realmente n√£o tinha parado para avaliar o n√≠vel de dificuldade da solu√ß√£o proposta.</p>

<p>Muitos quando era questionados das escolhas gaguejavam ou dava desculpas esfarrapadas. Nossa solu√ß√£o n√£o era a cereja do bolo, no documento que entregamos ela ocupava poucos par√°grafos (algo como uns dois a mais que a sess√£o anterior) com alguns links de documenta√ß√£o. O ponto principal era o modelo de maturidade.</p>

<h1 id="outras-aplica√ß√µes-reais">Outras aplica√ß√µes reais</h1>

<p>Voc√™ pode achar que isso s√≥ funciona para infraestrutura de aplica√ß√µes, mas √© bem prov√°vel que seu acesso ao mundo ser√° controlado por uma solu√ß√£o AIOps. As especifica√ß√µes 5G j√° preveem algo chamado como SDMN (Software-defined mobile networking) onde a estrutura da rede √© definida por software. Isso possibilita que seja tamb√©m alterada por software, assim h√° alguns casos de AIOps j√° estudados, que nesse caso se chama Closed Loop. Para maiores informa√ß√µes leia <a href="https://dl.acm.org/doi/10.1145/3472735.3474458">AI-driven Closed-loop Automation in 5G and beyond Mobile Networks</a> ou <a href="https://ieeexplore.ieee.org/abstract/document/8802040">Towards Closed Loop 5G Service Assurance Architecture for Network Slices as a Service</a>.</p>

<p>Mas vou descrever como isso pode acontecer no futuro. Imagina que alguma empresa lance um jogo que sobrecarrega toda a rede de telefonia. √â preciso de muito tr√°fego pra isso, mas vamos supor que esse jogo seja mesmo um grande desperd√≠cio. Se a rede n√£o se reorganizar, a lat√™ncia e velocidade de todos os usu√°rio da rede ser√° afetada. Usando Closed Loop, a pr√≥pria rede pode perceber que apenas um servi√ßo est√° causando um impacto enorme (normalmente 20% dos usu√°rios usam 80% da rede), ent√£o a rede √© dividida (network slicing) e esses usu√°rios s√£o direcionados para uma rede exclusiva. Deste modo, se o uso est√° abusivo, apenas eles v√£o sentir o impacto, evitando que outros usu√°rios sejam impactados. Isso √© muito importante em 5G pois nessa rede n√£o estar√£o somente usu√°rios, mas equipamentos importantes de f√°bricas, hospitais e locomo√ß√£o.</p>

<h1 id="conclus√£o">Conclus√£o</h1>

<p>Complexidade e papo de vendedor vende. Mas verdade e simplicidade convencem muito melhor. Muitos arquitetos gostam de complexidade porque eles acreditam que ela vai dar eleg√¢ncia a solu√ß√£o. Mas o conceito de eleg√¢ncia vem da simplicidade, fazer o b√°sico bem feito.</p>

<p>Ao propor uma arquitetura leia toda a documenta√ß√£o, evite passar vergonha de propor a solu√ß√£o errada. Pode ser que quando voc√™ for apresentar ningu√©m realmente saiba do que voc√™ est√° falando, mas pode ser que exista um especialista no assunto. Existe at√© um conto centen√°rio chamado <a href="https://www.amazon.com.br/Homem-Sabia-Javan%C3%AAs-Outros-Contos/dp/8534235929">O homem que sabia javan√™s</a> que mostra como uma pessoa pode parecer inteligente apenas sendo cara de pau. N√£o seja essa pessoa, isso √© leviano e injusto. Creio que n√≥s s√≥ ganhamos esse pr√™mio porque ao vender as dificuldades de implementa√ß√£o e fazer uma pesquisa s√©ria no tema implodimos todas as solu√ß√µes imposs√≠veis e colocamos uma bomba rel√≥gio na complexidade desnecess√°ria.</p>]]></content><author><name>{&quot;twitter&quot;=&gt;&quot;vepo&quot;, &quot;linkedin&quot;=&gt;&quot;https://www.linkedin.com/in/victorosorio/&quot;, &quot;picture&quot;=&gt;&quot;/assets/images/me.avif&quot;}</name></author><category term="AIOps" /><category term="AI" /><category term="O homem que sabia javan√™s" /><summary type="html"><![CDATA[Um breve relato sobre a proposi√ß√£o de uma solu√ß√£o que decidimos n√£o apresentar uma solu√ß√£o, mas um modelo de maturidade. Era um desafio, o que apresentamos n√£o cobria o que era deseja, mas mesmo assim ganhamos.]]></summary></entry></feed>